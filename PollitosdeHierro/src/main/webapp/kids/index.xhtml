<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="viewname">
        <li> 
            <p:link outcome="/dashboard">Inicio</p:link><i class="fal fa-long-arrow-right"></i>Niños
        </li>
    </ui:define> 

    <ui:define name="content">
        <div class="card card-w-title resolution-center ui-fluid">
            <h:form  id="form">   
                <p:growl life="10000" id="generalGrowl"  escape="false" showDetail="true" showSummary="false"> <p:autoUpdate /> </p:growl>
                <div class="TexAlCenter">
                    <div class="TexAlLeft">
                        <p:link id="button-dismiss" outcome="/configure" styleClass="Fleft">
                            <i class="fas fa-arrow-circle-left Fs30"></i>
                        </p:link>
                        <p:tooltip position="top" for="button-dismiss" value="Volver a la pantalla anterior"/>     

                        <p:commandLink id="button-create" styleClass="Fleft" onclick="PF('create-dlg').show();">                                    
                            <i class="fas fa-plus-circle Fs30"></i>
                        </p:commandLink>
                        <p:tooltip position="top" for="button-create" value="crear usuario nuevo"/>
                    </div>

                    <h2 class="CardTopic TexAlCenter Fs25">Niños</h2>

                    <p:dataTable reflow="true" multiViewState="true" filterDelay="1300" id="kidsTable" var="kid" value="#{pdhKidManaged.pdhKids}" widgetVar="kidsTable" paginator="true" 
                                 selectionMode="single" rowKey="#{kid.pdhKidId}"
                                 rows="50" emptyMessage="#{bundle.ListCurrenciesEmpty}" rowsPerPageTemplate="50,70,90" 
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" 
                                 filteredValue="#{pdhKidManaged.filteredPdhKid}"
                                 >     
                        <p:ajax event="filter" ignoreAutoUpdate="true"/>
                        <f:facet name="header">
                            <p:outputPanel>
                                <p:outputLabel value="Busqueda global" />
                                <br/><p:inputText id="globalFilter" onblur="PF('kidsTable').filter()" style="width:90%" placeholder="Buscar..."/>
                            </p:outputPanel>
                        </f:facet>

                        <p:column style="width:20px" exportable="false"> 
                            <p:commandLink rendered="#{(kid.pdhKidCreatedBy.pdhUserUsername != null and kid.pdhKidCreatedBy.pdhUserUsername != '') or !(kid.pdhKidUpdatedBy.pdhUserUsername == null or kid.pdhKidUpdatedBy.pdhUserUsername == '')}" process="@this" id="updateCreatedBy" styleClass="Fleft">                                    
                                <i class="fas fa-id-card-alt Fs20"></i>
                            </p:commandLink>
                            <p:tooltip position="top" for="updateCreatedBy" value="Creado por: #{kid.pdhKidCreatedBy.pdhUserUsername} 
                                       #{userLoginManaged.formatDateWithHour(kid.pdhKidCreatedDate)}" 
                                       rendered="#{(kid.pdhKidUpdatedBy.pdhUserUsername == null or kid.pdhKidUpdatedBy.pdhUserUsername == '')}"/>     
                            <p:tooltip position="top" for="updateCreatedBy" value="Creado por: #{kid.pdhKidCreatedBy.pdhUserUsername} 
                                       #{userLoginManaged.formatDateWithHour(kid.pdhKidCreatedDate)} 
                                       Actualizado por: #{kid.pdhKidUpdatedBy.pdhUserUsername} 
                                       #{userLoginManaged.formatDateWithHour(kid.pdhKidUpdatedDate)}" 
                                       rendered="#{!(kid.pdhKidUpdatedBy.pdhUserUsername == null or kid.pdhKidUpdatedBy.pdhUserUsername == '') and !(kid.pdhKidCreatedBy.pdhUserUsername == null and kid.pdhKidCreatedBy.pdhUserUsername == '')}"/>
                            <p:tooltip position="top" for="updateCreatedBy" value="Actualizado por: #{kid.pdhKidUpdatedBy.pdhUserUsername} 
                                       #{userLoginManaged.formatDateWithHour(kid.pdhKidUpdatedDate)}" 
                                       rendered="#{!(kid.pdhKidUpdatedBy.pdhUserUsername == null or kid.pdhKidUpdatedBy.pdhUserUsername == '') and (kid.pdhKidCreatedBy.pdhUserUsername == null or kid.pdhKidCreatedBy.pdhUserUsername == '')}"/>
                        </p:column>

                        <p:column filterBy="#{kid.pdhKidCode}" headerText="Código" filterMatchMode="contains"> 
                            <p:outputLabel value="#{kid.pdhKidCode}" />                           
                        </p:column>

                        <p:column filterBy="#{kid.pdhKidName} #{kid.pdhKidSurname}" headerText="Nombre" filterMatchMode="contains"> 
                            <p:outputLabel value="#{kid.pdhKidName} #{kid.pdhKidSurname}" />                           
                        </p:column>

                        <p:column filterBy="#{kid.pdhKidAge}" headerText="Edad" filterMatchMode="contains"> 
                            <p:outputLabel value="#{kid.pdhKidAge}" />                           
                        </p:column>

                        <!--
                        <p:column styleClass="actions" headerText="Opciones" exportable="false">   
                            <p:commandLink process="@this" resetValues="true" id="rowInfo" onclick="PF('view-dlg').show();" update="viewForm" styleClass="Fleft" > 
                                <i class="fas fa-eye Fs20"></i>
                                <f:param  value="#{kid.pdhKidId}" name="id"/> 
                            </p:commandLink>
                            <p:tooltip position="top" for="rowInfo" value="Ver información"/>
                            
                            <p:commandLink process="@this" resetValues="true" id="editCommand" onclick="PF('edit-dlg').show();" update="editForm" styleClass="Fleft">
                                <i class="fas fa-pen Fs20"></i>    
                                <f:param  value="#{kid.pdhKidId}" name="id"/> 
                            </p:commandLink>    
                            <p:tooltip position="top" for="editCommand" value="Editar información"/>
                                
                            <p:commandLink process="@this" resetValues="true" id="deleteCommand" onclick="PF('delete-dlg').show();" update="deleteForm" styleClass="Fleft">                                    
                                <i class="fas fa-trash Fs20"></i>  
                                <f:param  value="#{kid.pdhKidId}" name="id"/> 
                            </p:commandLink>     
                            <p:tooltip position="top" for="deleteCommand" value="Borrar información"/>
                        </p:column>
                        -->
                    </p:dataTable>  
                </div>
            </h:form>
            <br/>
        </div>
        <ui:include src="create.xhtml"></ui:include>  
        <!--ui:include src="edit.xhtml"></ui:include> 
        <ui:include src="delete.xhtml"></ui:include> 
        <ui:include src="view.xhtml"></ui:include--> 
    </ui:define>
</ui:composition>