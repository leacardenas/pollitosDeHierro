<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
                    
    <ui:define name="viewname">
        <li> 
            <p:link outcome="/dashboard">Inicio</p:link><i class="fal fa-long-arrow-right"></i><p:link outcome="/configure">Configuraciones</p:link><i class="fal fa-long-arrow-right"></i>Localizaciones
        </li>
    </ui:define> 
        
    <ui:define name="content">
        <div class="card card-w-title resolution-center ui-fluid">
            <h:form  id="form">   
                <p:growl life="10000" id="generalGrowl"  escape="false" showDetail="true" showSummary="false"> <p:autoUpdate /> </p:growl>
                <div class="TexAlCenter">
                    <div class="TexAlLeft">
                        <p:link id="button-dismiss" outcome="/configure" styleClass="Fleft">
                            <i class="far fa-arrow-circle-left Fs30"></i>
                        </p:link>
                        <p:tooltip position="top" for="button-dismiss" value="Volver a la pantalla anterior"/>     
                            
                        <p:commandLink id="button-create" styleClass="Fleft" onclick="PF('create-dlg').show();">                                    
                            <i class="far fa-plus-circle Fs30"></i>
                        </p:commandLink>
                        <p:tooltip position="top" for="button-create" value="crear sede nueva"/>
                    </div>
                        
                    <h2 class="CardTopic TexAlCenter Fs25">Localizaciones del sistema</h2>
                    
                    <p:dataTable reflow="true" multiViewState="true" filterDelay="1300" id="locationsTable" var="location" value="#{pdhGeolocationsManaged.pdhGeolocations}" widgetVar="locationsTable" paginator="true" 
                                 selectionMode="single" rowKey="#{location.pdhGeolocationsId}"
                                 rows="50" emptyMessage="#{bundle.ListCurrenciesEmpty}" rowsPerPageTemplate="50,70,90" 
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" 
                                 filteredValue="#{pdhHeadquarterManaged.filteredPdhHeadquarter}"
                                 >     
                        <p:ajax event="filter" ignoreAutoUpdate="true"/>
                        <f:facet name="header">
                            <p:outputPanel>
                                <p:outputLabel value="Busqueda global" />
                                <br/><p:inputText id="globalFilter" onblur="PF('locationsTable').filter()" style="width:90%" placeholder="Buscar..."/>
                            </p:outputPanel>
                        </f:facet>
                            
                        <p:column style="width:20px" exportable="false"> 
                            <p:commandLink rendered="#{(location.pdhGeolocationsCreatedBy.pdhUserUsername != null and location.pdhGeolocationsCreatedBy.pdhUserUsername != '') or !(location.pdhGeolocationsUpdatedBy.pdhUserUsername == null or location.pdhGeolocationsUpdatedBy.pdhUserUsername == '')}" process="@this" id="updateCreatedBy" styleClass="Fleft">                                    
                                <i class="far fa-id-card-alt Fs20"></i>
                            </p:commandLink>
                            <p:tooltip position="top" for="updateCreatedBy" value="Creado por: #{location.pdhGeolocationsCreatedBy.pdhUserUsername} 
                                       #{userLoginManaged.formatDateWithHour(location.pdhGeolocationsCreatedDate)}" 
                                       rendered="#{(location.pdhGeolocationsUpdatedBy.pdhUserUsername == null or location.pdhGeolocationsUpdatedBy.pdhUserUsername == '')}"/>     
                            <p:tooltip position="top" for="updateCreatedBy" value="Creado por: #{location.pdhGeolocationsCreatedBy.pdhUserUsername} 
                                       #{userLoginManaged.formatDateWithHour(location.pdhGeolocationsCreatedDate)} 
                                       Actualizado por: #{location.pdhGeolocationsUpdatedBy.pdhUserUsername} 
                                       #{userLoginManaged.formatDateWithHour(location.pdhGeolocationsUpdatedDate)}" 
                                       rendered="#{!(location.pdhGeolocationsUpdatedBy.pdhUserUsername == null or location.pdhGeolocationsUpdatedBy.pdhUserUsername == '') and !(location.pdhGeolocationsCreatedBy.pdhUserUsername == null and location.pdhGeolocationsCreatedBy.pdhUserUsername == '')}"/>
                            <p:tooltip position="top" for="updateCreatedBy" value="Actualizado por: #{location.pdhGeolocationsUpdatedBy.pdhUserUsername} 
                                       #{userLoginManaged.formatDateWithHour(location.pdhGeolocationsUpdatedDate)}" 
                                       rendered="#{!(location.pdhGeolocationsUpdatedBy.pdhUserUsername == null or location.pdhGeolocationsUpdatedBy.pdhUserUsername == '') and (location.pdhGeolocationsCreatedBy.pdhUserUsername == null or location.pdhGeolocationsCreatedBy.pdhUserUsername == '')}"/>
                        </p:column>
                            
                        <p:column filterBy="#{location.pdhGeolocationsName}" headerText="Nombre" filterMatchMode="contains"> 
                            <p:outputLabel value="#{location.pdhGeolocationsName}" />                           
                        </p:column>
                        
                        <p:column styleClass="actions" headerText="Opciones" exportable="false">   
                            <p:commandLink process="@this" resetValues="true" id="rowInfo" onclick="PF('view-dlg').show();" update="viewForm" styleClass="Fleft" > 
                                <i class="far fa-eye Fs20"></i>
                                <f:param  value="#{location.pdhGeolocationsId}" name="id"/> 
                            </p:commandLink>
                            <p:tooltip position="top" for="rowInfo" value="Ver información"/>
                            
                            <p:commandLink process="@this" resetValues="true" id="editCommand" onclick="PF('edit-dlg').show();" update="editForm" styleClass="Fleft">
                                <i class="far fa-pen Fs20"></i>    
                                <f:param  value="#{location.pdhGeolocationsId}" name="id"/> 
                            </p:commandLink>    
                            <p:tooltip position="top" for="editCommand" value="Editar información"/>
                                
                            <p:commandLink process="@this" resetValues="true" id="deleteCommand" onclick="PF('delete-dlg').show();" update="deleteForm" styleClass="Fleft">                                    
                                <i class="far fa-trash Fs20"></i>  
                                <f:param  value="#{location.pdhGeolocationsId}" name="id"/> 
                            </p:commandLink>     
                            <p:tooltip position="top" for="deleteCommand" value="Borrar información"/>
                        </p:column>
                    </p:dataTable>  
                </div>
            </h:form>
            <br/>
        </div>
        <ui:include src="create.xhtml"></ui:include>  
        <ui:include src="edit.xhtml"></ui:include> 
        <ui:include src="delete.xhtml"></ui:include> 
        <ui:include src="view.xhtml"></ui:include> 
    </ui:define>
</ui:composition>